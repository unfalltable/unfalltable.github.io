<!DOCTYPE html>
<html lang='en'>

<head>
  <meta name="generator" content="Hexo 7.0.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://gcore.jsdelivr.net'>
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>区块链基础 - JianHong</title>

  
    <meta name="description" content="简介WEB3 WEB1：只读，静态内容，信息聚合 WEB2：可读写，可交互，数据存储在中心化服务器，受监管 WEB3：可读写，可拥有，去中心化，不可篡改  平台对比    以太坊 Fabric Corda    节点许可 基于智能合约的规则，将基于文件的每个节点的规则作本地覆盖（override） 可在节点(node)，通道(channel)和联盟(consortium)级别上配置 可信网络映射服">
<meta property="og:type" content="article">
<meta property="og:title" content="区块链基础">
<meta property="og:url" content="http://example.com/2024/01/18/Note/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%BC%80%E5%8F%91/%E5%9F%BA%E7%A1%80/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9F%A5%E8%AF%86/index.html">
<meta property="og:site_name" content="JianHong">
<meta property="og:description" content="简介WEB3 WEB1：只读，静态内容，信息聚合 WEB2：可读写，可交互，数据存储在中心化服务器，受监管 WEB3：可读写，可拥有，去中心化，不可篡改  平台对比    以太坊 Fabric Corda    节点许可 基于智能合约的规则，将基于文件的每个节点的规则作本地覆盖（override） 可在节点(node)，通道(channel)和联盟(consortium)级别上配置 可信网络映射服">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-01-18T13:12:24.658Z">
<meta property="article:modified_time" content="2024-01-21T17:35:17.589Z">
<meta property="article:author" content="JianHong">
<meta property="article:tag" content="web3">
<meta name="twitter:card" content="summary">
  
  
  
  <meta name="keywords" content="web3">

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  

  

  


  
</head>

<body>
  

<div class="l_cover post"><div class="cover"><div class="lazy img bg" data-bg="https://source.unsplash.com/2000x400/?web3"></div></div></div>


  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    

  

<header class="header"><div class="logo-wrap"><a class="title" href="/"><div class="main" ff="title">JianHong</div></a></div>

<nav class="menu dis-select"></nav>
</header>


<div class="widgets">
<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" data-filter="/blog/" placeholder="文章搜索"><svg t="1670596976048" class="icon search-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"></path></svg></form><div id="search-result"></div><div class="search-no-result">No Results!</div></div></div></widget>


<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">区块链基础</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WEB3"><span class="toc-text">WEB3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B3%E5%8F%B0%E5%AF%B9%E6%AF%94"><span class="toc-text">平台对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E7%A7%8D%E5%AF%B9%E6%AF%94"><span class="toc-text">链种对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BA%E5%9D%97%E9%93%BE"><span class="toc-text">区块链</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84"><span class="toc-text">结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E6%8C%87%E9%92%88"><span class="toc-text">哈希指针</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%98%93"><span class="toc-text">交易</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E7%89%B9%E5%B8%81"><span class="toc-text">比特币</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-1"><span class="toc-text">结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BA%E5%9D%97%E7%BB%93%E6%9E%84"><span class="toc-text">区块结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%BF%E6%B1%A0"><span class="toc-text">矿池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82%E7%82%B9"><span class="toc-text">节点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%96%E7%9F%BF"><span class="toc-text">挖矿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%98%93-1"><span class="toc-text">交易</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-2"><span class="toc-text">结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#merkle-tree"><span class="toc-text">merkle tree</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E5%90%88%E6%B3%95%E6%80%A7"><span class="toc-text">交易合法性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%AD%BE%E5%90%8D"><span class="toc-text">多重签名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8F%89"><span class="toc-text">分叉</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Taproff"><span class="toc-text">Taproff</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A"><span class="toc-text">以太坊</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-3"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-3"><span class="toc-text">结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A0%91%EF%BC%88Modified-Merkle-Patricia-Tree%EF%BC%89"><span class="toc-text">状态树（Modified Merkle Patricia Tree）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E6%A0%91"><span class="toc-text">交易树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E6%8D%AE%E6%A0%91"><span class="toc-text">收据树</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B1%E8%AF%86%E5%8D%8F%E8%AE%AEPOW"><span class="toc-text">共识协议POW</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%96%E7%9F%BF-1"><span class="toc-text">挖矿</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-text">步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%BE%E5%BA%A6%E8%B0%83%E6%95%B4"><span class="toc-text">难度调整</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WETH"><span class="toc-text">WETH</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6"><span class="toc-text">共识机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#POW"><span class="toc-text">POW</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POS"><span class="toc-text">POS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DPOS"><span class="toc-text">DPOS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PBFT"><span class="toc-text">PBFT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DAO"><span class="toc-text">DAO</span></a></li></ol></div></div></widget>




</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/unfalltable" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/08a41b181ce68.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a><span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/Web3/">Web3</a></div><div id="post-meta">Posted on&nbsp;<time datetime="2024-01-18T13:12:24.658Z">2024-01-18</time></div></div>

<article class='md-text content post'>
<h1 class="article-title"><span>区块链基础</span></h1>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="WEB3"><a href="#WEB3" class="headerlink" title="WEB3"></a>WEB3</h3><ul>
<li>WEB1：只读，静态内容，信息聚合</li>
<li>WEB2：可读写，可交互，数据存储在中心化服务器，受监管</li>
<li>WEB3：可读写，可拥有，去中心化，不可篡改</li>
</ul>
<h3 id="平台对比"><a href="#平台对比" class="headerlink" title="平台对比"></a>平台对比</h3><table>
<thead>
<tr>
<th></th>
<th>以太坊</th>
<th>Fabric</th>
<th>Corda</th>
</tr>
</thead>
<tbody><tr>
<td>节点许可</td>
<td>基于智能合约的规则，将基于文件的每个节点的规则作本地覆盖（override）</td>
<td>可在节点(node)，通道(channel)和联盟(consortium)级别上配置</td>
<td>可信网络映射服务，由每个节点上基于文件的配置进行补充。Corda网络被划分为由单独的证书颁发机构(Certificate Authorities)管理的兼容区域</td>
</tr>
<tr>
<td>身份</td>
<td>公钥-分布式的，可在以太坊的链之间可互操作。通过证明(proofs)与PKI耦合</td>
<td>基于具有本地组织身份的PKI。在共识和许可中始终使用组织身份，而不是个人身份</td>
<td>基于个人和组织身份的PKI</td>
</tr>
<tr>
<td>加密算法</td>
<td>secp256k1</td>
<td>可插拔 (内置有 secp256r1 和 secp384r1的椭圆算法).</td>
<td>ed25519 secp256r1 secp256k1 RSA (3072bit) PKCS#1 SPHINCS-256 (experimental 试验阶段)</td>
</tr>
<tr>
<td>交易共识</td>
<td>排序(Order)-&gt;执行(Execute)&#x2F;验证(Validate)</td>
<td>执行-&gt;排序-&gt;验证</td>
<td>执行&#x2F;验证-&gt;排序&#x2F;公证(Notarize)</td>
</tr>
<tr>
<td>应用的责任</td>
<td>将签名的交易发送到网络中的一个节点</td>
<td>直接与所有其他参与者协调以获得背书(endorsment)，管理状态、签名和提交的最优并发锁定(optimistic concurrency locking)</td>
<td>直接与所有其他参与者协调以获得背书(endorsment)，管理状态、签名和提交的最优并发锁定(optimistic concurrency locking)</td>
</tr>
<tr>
<td>共识算法</td>
<td>Proof-of-Authority 权威证明 (BFT). Raft (CFT with trusted leader，有可信领导). Istanbul BFT (BFT with deterministic leader rotation 有确定性领导轮换). Tendermint</td>
<td>Kafka&#x2F;Zab (CFT with trusted leader 有可信领导). Raft (CFT with trusted leader有可信领导)</td>
<td>Raft (CFT with trusted leader有可信领导) BFT</td>
</tr>
<tr>
<td>智能合约引擎</td>
<td>EVM, 进程内沙盒(in-process sandbox)</td>
<td>容器隔离(Docker isolation)</td>
<td>确定性JVM(Deterministic JVM)</td>
</tr>
<tr>
<td>智能合约语言</td>
<td>DSL (Solidity, Serpent), 保证确定性</td>
<td>多语言 (Go, Node.js, Java), 可容忍的非确定性</td>
<td>Java, Kotlin, 通过推荐的库来实现确定性</td>
</tr>
<tr>
<td>智能合约生命周期</td>
<td>不可篡改，部署容易，链上储存</td>
<td>需要细致的过程(elaborate process)来部署&#x2F;更改。链下存储</td>
<td>需要节点级管理操作才能部署&#x2F;更新。链下存储。 正在进行的工作是将共识关键代码与非共识关键代码拆分为不同的存储策略（分别在链上和链下）</td>
</tr>
<tr>
<td>智能合约升级</td>
<td>通过编程模式来扩展&#x2F;迁移代码和数据</td>
<td>通过管理程序和升级交易来替换链下代码</td>
<td>具有基于哈希约束的合同通过节点级管理程序和协调流程进行显式升级和授权。只要根据约束条件和哈希匹配项进行签名，具有签名约束条件的合同就会自动允许执行新版本</td>
</tr>
<tr>
<td>资产数字化&#x2F;通证化</td>
<td>原生带有多标准功能: ERC20&#x2F;ERC721&#x2F;ERC777 etc.</td>
<td>无原生通证，定制化方案</td>
<td>定制化方案，通过Corda通证SDK更容易实现</td>
</tr>
<tr>
<td>多链</td>
<td>每个链都是唯一的，并且需要单独的节点运行时（最少或3或4个，取决于共识）</td>
<td>具有共享对等runtime和共享顺序器的本机功能（通道）。用于创建具有隔离状态的侧链的内置治理</td>
<td>没有链的概念（共享账本）。交易始终明确地针对特定节点。状态的范围仅限于指定的公证节点，可以将其重新定向到其他公证</td>
</tr>
<tr>
<td>私有交易</td>
<td>公共哈希代表输入</td>
<td>公共哈希代表输入和私有结束状态</td>
<td>继承的所有交易都是私有的。所有的交易对对验证公正节点</td>
</tr>
<tr>
<td>社区贡献者（至2019年10月）</td>
<td>Go-Ethereum: 429 Quorum: 383 Besu: 60 Autonity: 360</td>
<td>Fabric: 185</td>
<td>Corda: 146</td>
</tr>
<tr>
<td>社区活跃度(Month of Nov. 2019)</td>
<td>Go-Ethereum: 15 authors, 98 PRs Quorum: 9 authors, 13 PRs Besu: 23 authors, 66 PRs Autonity: 6 authors, 6 PRs</td>
<td>Fabric: 31 authors, 220 PRs</td>
<td>Corda: 33 authors, 91 PRs</td>
</tr>
</tbody></table>
<h3 id="链种对比"><a href="#链种对比" class="headerlink" title="链种对比"></a>链种对比</h3><table>
<thead>
<tr>
<th></th>
<th>公有链</th>
<th>联盟链</th>
<th>私有链</th>
</tr>
</thead>
<tbody><tr>
<td>中心化程度</td>
<td>完全</td>
<td>部分</td>
<td></td>
</tr>
<tr>
<td>可控性</td>
<td>弱</td>
<td>强</td>
<td></td>
</tr>
<tr>
<td>数据隐秘性</td>
<td>弱</td>
<td>强</td>
<td></td>
</tr>
<tr>
<td>交易速度</td>
<td>慢</td>
<td>快</td>
<td></td>
</tr>
<tr>
<td>场景</td>
<td></td>
<td>溯源、慈善、<br />金融、保险</td>
<td></td>
</tr>
</tbody></table>
<h2 id="区块链"><a href="#区块链" class="headerlink" title="区块链"></a>区块链</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><ul>
<li><p>区块链提供了一种让多个参与方在没有一个唯一可信方的情况下达成合作</p>
</li>
<li><p>区块链上的数据是不可篡改的</p>
</li>
<li><p>区块链中的第一个区块为创世区块</p>
</li>
<li><p>区块链的安全性是通过使用hash和签名的方式进行加密，使用的是 <code>sha-256</code> 加密算法</p>
</li>
<li><p>创建账户原理</p>
<ul>
<li>因为是去中心化的，所以个人即可创建账户，无需审核</li>
<li>创建账户的过程就是创建一个公私钥<ul>
<li>公钥就是账号</li>
<li>私钥就是操作账号的权限</li>
<li>对交易进行加密，用私钥加密，公钥解密，也就是一个签名的过程</li>
</ul>
</li>
</ul>
</li>
<li><p>挖矿</p>
<ul>
<li>挖矿是无记忆的，即和已经挖矿的时长无关</li>
</ul>
</li>
<li><p>在互不信任的对象之间建立联系</p>
</li>
</ul>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><h4 id="哈希指针"><a href="#哈希指针" class="headerlink" title="哈希指针"></a>哈希指针</h4><ul>
<li>保存指向区块的哈希值和区块地址</li>
<li>每个区块有一个指针指向前一个区块<ul>
<li>这个指针的hash值为前一个区块的数据+前一个区块的hash值</li>
<li>即前一个区块的数据如果发生变化，后一个区块的hash指针就找不到前一个区块了</li>
</ul>
</li>
</ul>
<h3 id="交易"><a href="#交易" class="headerlink" title="交易"></a>交易</h3><ul>
<li>交易现在本地上执行完成，再进行挖矿<ul>
<li>因为要先确认块头中的信息</li>
<li>要验证交易的合法性、智能合约的正确执行</li>
</ul>
</li>
</ul>
<h2 id="比特币"><a href="#比特币" class="headerlink" title="比特币"></a>比特币</h2><h3 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h3><ul>
<li>区块链1.0，平均出块时间十分钟</li>
<li>一个节点最大1mb，一个交易250字节，最多有4000个交易，每秒处理大概7个交易</li>
<li>是一个基于栈的语言</li>
<li>很大程度的保证数据不可篡改</li>
<li>转账操作都需要签名<ul>
<li>转账需要说明币的来源</li>
</ul>
</li>
<li>由于网络带宽限制和算力分布限制，比特币限制了单个节点可接收信息和主动链接其他节点的上限。对于接受信息，单个节点最多只能接收117个节点的信息，对于主动链接其他节点，单个节点只能主动联系其他8个节点</li>
</ul>
<h3 id="结构-1"><a href="#结构-1" class="headerlink" title="结构"></a>结构</h3><h4 id="区块结构"><a href="#区块结构" class="headerlink" title="区块结构"></a>区块结构</h4><ul>
<li>block header 区块头<ul>
<li>存储merkle tree的根hash值，可以检测出整棵树任何位置的修改</li>
<li>比特币协议版本</li>
<li>指向前一个区块区块头的指针（其实是一个哈希）</li>
<li>挖矿难度目标阈值target（256byte），被编码成4byte的nBits</li>
</ul>
</li>
<li>block body 区块体<ul>
<li>存储了具体的交易列表</li>
</ul>
</li>
<li>UTXO<ul>
<li>UTXO存储的是没花出去的交易的输出集合</li>
</ul>
</li>
</ul>
<h4 id="矿池"><a href="#矿池" class="headerlink" title="矿池"></a>矿池</h4><ul>
<li>一个矿主+很多的矿工</li>
<li>矿主负责全节点的工作，矿工负责计算hash值</li>
<li>分红<ul>
<li>按劳分配，通过工作量证明</li>
<li>降低工作难度，矿工提交难度低的区块作为工作证明</li>
</ul>
</li>
<li>私吞情况<ul>
<li>不可能的，矿工的任务由矿主分配</li>
<li>收款地址是矿主的，无法私吞</li>
</ul>
</li>
<li>存在恶意竞争的情况<ul>
<li>其他矿池安排一些矿工到其他矿池工作</li>
<li>参与其他矿池的分红，但是当这些矿工挖到区块后会选择放弃区块</li>
</ul>
</li>
<li>有危害，当矿池算力达到51%攻击后<ul>
<li>可以实现分叉攻击 </li>
<li>可以实现封锁账户</li>
</ul>
</li>
</ul>
<h4 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h4><ul>
<li>分为全节点和轻节点<ul>
<li>全节点<ul>
<li>一直在线，维护完整的区块信息</li>
<li>监听区块链网络上的交易信息，验证每个交易的合法性</li>
<li>决定哪些交易会被打包到区块里</li>
<li>监听其他矿工挖出的区块，验证其合法性</li>
</ul>
</li>
<li>轻节点<ul>
<li>包含block header</li>
<li>不是一直在线的</li>
<li>只保存与自己相关的交易，并只能检验与自己相关的交易的合法性</li>
<li>无法检测其他人发布的区块的正确性</li>
<li>可以验证挖矿难度</li>
<li>能检测最长链，但不能检测最长合法链</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="挖矿"><a href="#挖矿" class="headerlink" title="挖矿"></a>挖矿</h3><ul>
<li>出块时间十分钟，同时出块的可能性较小</li>
<li>解决恶意节点，防止女巫攻击（sybil attack）<ul>
<li>女巫攻击：制造大量的账号进行攻击</li>
</ul>
</li>
<li>比特币使用算力投票</li>
<li>最长链原则</li>
<li>挖矿奖励机制<ul>
<li>每隔2016个区块要重新调整目标阈值，大约两星期</li>
<li>target &#x3D; target * 实际产生2016个区块的时间 &#x2F; (2016*10)</li>
<li>target的上调和下调的上限不会超过四倍 </li>
<li>当该区块被其他矿工挖出后，会停止当前区块，组装新的候选区块<ul>
<li>不可惜，因为每次挖矿的概率都是一样的</li>
</ul>
</li>
</ul>
</li>
<li>确认交易机制<ul>
<li>交易写入区块后为了防止双花攻击，可以多等6个区块产出后再确认，差不多一小时</li>
</ul>
</li>
<li>应用层、P2P</li>
<li>tcp通信</li>
</ul>
<h3 id="交易-1"><a href="#交易-1" class="headerlink" title="交易"></a>交易</h3><h4 id="结构-2"><a href="#结构-2" class="headerlink" title="结构"></a>结构</h4><ul>
<li>记录的是当前区块中所有的交易信息<ul>
<li><p>交易id、交易的hash值、版本号、大小、</p>
</li>
<li><p>所在区块hash值，交易确认信息数、交易产生时间、区块产生时间</p>
</li>
<li><p>锁定时间 locktime</p>
<ul>
<li>一般都是0，即立即生效</li>
</ul>
</li>
<li><p>输入 vin</p>
<ul>
<li><p>txid：之前交易的hash值，也就是币的来源</p>
</li>
<li><p>vout：这个交易的第几个输出</p>
</li>
<li><p>ScriptSig：输入脚本，签名</p>
<ul>
<li>asm：操作</li>
<li>hex：</li>
</ul>
</li>
</ul>
</li>
<li><p>输出 vout</p>
<ul>
<li>value：交易的金额</li>
<li>n：这个交易的第几个输出</li>
<li>scriptPubKey：输出脚本<ul>
<li>asm：操作</li>
<li>hex：</li>
<li>reqSigs：需要的签名数</li>
<li>type：输出的类型</li>
<li>address：输出的地址</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="merkle-tree"><a href="#merkle-tree" class="headerlink" title="merkle tree"></a>merkle tree</h4><ul>
<li><p>交易的结构是一颗二叉树，叶子节点是交易的数据，非叶子节点是左右孩子节点的hash</p>
<ul>
<li>非叶子节点的hash指针有两个，分别指向左右子树</li>
<li>通过左右孩子可以计算得出上一个节点（父节点）的hash值</li>
</ul>
</li>
<li><p>提供merkle proof，即交易到merkle tree的根hash值的路径</p>
</li>
<li><p>当一个轻节点想知道交易是否包含在对应的区块中的merkle tree时，它需要</p>
<ul>
<li>计算当前交易的hash值，通知全节点取得另一个hash值</li>
<li>计算得出上一个节点的hash次，循环往复直到根节点</li>
<li>轻节点将计算得出的根节点hash值和当前区块的block header中的根节点hash值进行比较即可</li>
</ul>
</li>
<li><p>可以证明交易存在merkle tree中，proof of membership</p>
<ul>
<li>如果merkle tree的叶子节点是有序的话，就可以证明某个交易是否在树上</li>
<li>比特币的merkle tree的叶子节点是无序的</li>
</ul>
</li>
<li><p>铸币交易的输出会有目标用户的hash</p>
</li>
<li><p>目标用户转账时会校验这个hash是否正确，这样可以避免伪造交易</p>
</li>
</ul>
<h4 id="交易合法性"><a href="#交易合法性" class="headerlink" title="交易合法性"></a>交易合法性</h4><ul>
<li>早期脚本是将当前交易的输入和币的来源的输出拼接在一起验证</li>
<li>后出于安全因素改为分别验证<ul>
<li>先执行输入脚本，在执行输出脚本</li>
</ul>
</li>
<li>P2PK<ul>
<li>输入<ul>
<li>支付人的签名</li>
</ul>
</li>
<li>输出<ul>
<li>收款人公钥</li>
<li>检查签名</li>
</ul>
</li>
<li>流程<ul>
<li>将输入的签名压入栈</li>
<li>将输出中的公钥压入栈</li>
<li>验证栈中的公钥和签名是否合法</li>
</ul>
</li>
</ul>
</li>
<li>P2PKH（最常用）<ul>
<li>输入<ul>
<li>支付人的签名</li>
<li>收款人公钥</li>
</ul>
</li>
<li>输出<ul>
<li>DUP 复制栈顶元素</li>
<li>HASH160 将栈顶元素取hash值</li>
<li>收款人公钥的hash</li>
<li>检查签名</li>
</ul>
</li>
<li>流程<ul>
<li>将输入脚本中的支付人的签名压入栈</li>
<li>将输入脚本中的收款人公钥压入栈</li>
<li>复制栈顶元素压入栈（收款人公钥）</li>
<li>将栈顶元素弹出并取hash值压入栈（收款人公钥哈希）</li>
<li>将输出脚本的收款人公钥的hash压入栈</li>
<li>比较栈顶两个元素是否一致（比较两个收款人hash是否一致）</li>
<li>检查签名</li>
</ul>
</li>
</ul>
</li>
<li>P2SH<ul>
<li>输入<ul>
<li>支付人的签名</li>
<li>赎回脚本<ul>
<li>收款人公钥</li>
<li>检查签名</li>
</ul>
</li>
</ul>
</li>
<li>输出<ul>
<li>HASH160 将栈顶元素取hash值</li>
<li>赎回脚本<ul>
<li>收款人公钥hash</li>
</ul>
</li>
</ul>
</li>
<li>流程<ul>
<li>将输入脚本中的支付人的签名压入栈</li>
<li>将输入脚本中的赎回脚本压入栈</li>
<li>将栈顶元素弹出并取hash值压入栈<ul>
<li>得到赎回脚本的hash，其实就是收款人公钥的hash</li>
</ul>
</li>
<li>将输出脚本的赎回脚本压入栈<ul>
<li>其实就是将收款人公钥的hash压入栈</li>
</ul>
</li>
<li>验证收款人公钥的hash值是否一致</li>
<li>验证输入的签名和输入的赎回脚本中的签名</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="多重签名"><a href="#多重签名" class="headerlink" title="多重签名"></a>多重签名</h4><ul>
<li>需要多个人的签名才可以进行转账</li>
<li>p2sh实现<ul>
<li>封装了公钥</li>
</ul>
</li>
<li>有bug，会多压一个冗余数据入栈</li>
</ul>
<h3 id="分叉"><a href="#分叉" class="headerlink" title="分叉"></a>分叉</h3><ul>
<li>产生的原因<ul>
<li>同时发布区块</li>
<li>分叉攻击</li>
<li>比特币协议发生改变<ul>
<li>硬分叉（hard fork）<ul>
<li>永久的</li>
<li>向前不兼容</li>
<li>部分节点不更新协议就会出现，而且不会消除</li>
<li>会出现回访攻击和重放攻击<ul>
<li>通过chain ID 解决</li>
</ul>
</li>
</ul>
</li>
<li>软分叉（soft fork）<ul>
<li>暂时的</li>
<li>向前兼容的是软分叉</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Taproff"><a href="#Taproff" class="headerlink" title="Taproff"></a>Taproff</h3><ul>
<li>可以在BTC编写高级脚本</li>
</ul>
<h2 id="以太坊"><a href="#以太坊" class="headerlink" title="以太坊"></a>以太坊</h2><h3 id="简介-3"><a href="#简介-3" class="headerlink" title="简介"></a>简介</h3><ul>
<li>区块链2.0，平均出块时间10几秒</li>
<li>基于EVM虚拟机，运行的是去中心化的智能合约，发布后不可修改</li>
<li>有账户的性质<ul>
<li>能避免双花攻击</li>
<li>余额通过状态树维护，避免篡改余额</li>
<li>有一个随机数记录账户交易的次数</li>
<li>1以太 &#x3D; 10^18^Wei</li>
<li>账户中可存放合约代码</li>
<li>账户可存储信息</li>
</ul>
</li>
<li>发布新的区块时不会包含叔父区块中的交易，会检查叔父区块的合法性（是否符合挖矿难度要求）</li>
<li>只有分叉后的第一个叔父节点可以得到奖励</li>
<li>交易需要付燃油费gas<ul>
<li>每5个byte需要1个gas</li>
</ul>
</li>
<li>签名<ul>
<li><p>早期POW时期签名使用的是ECDSA算法中的非对称加密椭圆曲线ECC中的secp256k1曲线</p>
<ul>
<li>由于验证者数量庞大，使用ECDSA的验证时间达到了30分钟以上，无法出块</li>
<li>而且每个区块的签名量很多，会缓存很多的签名，带来了存储问题，而且验证这些签名也需要大量的时间</li>
</ul>
</li>
<li><p>在2.0中转为POS并将算法改为BLS</p>
<ul>
<li>将所有的签名压缩为一个，只需要验证一次</li>
<li>并且如果签名有误的情况下，可以找出是哪一个签名有误</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="结构-3"><a href="#结构-3" class="headerlink" title="结构"></a>结构</h3><h4 id="状态树（Modified-Merkle-Patricia-Tree）"><a href="#状态树（Modified-Merkle-Patricia-Tree）" class="headerlink" title="状态树（Modified Merkle Patricia Tree）"></a>状态树（Modified Merkle Patricia Tree）</h4><ul>
<li><p>账户地址到账户状态的映射，键值对</p>
<ul>
<li>key是地址</li>
<li>value是账户的状态，通过RLP进行序列化</li>
</ul>
</li>
<li><p>账户地址160位，40个16进制的数</p>
</li>
<li><p>类似字典树，但进行了路径压缩</p>
<ul>
<li>是唯一的</li>
<li>路径压缩对稀疏的数据效果好</li>
<li>eth的地址是2^160^ 的随机数，符合稀疏的条件</li>
<li>路径压缩就是把相同前缀的节点进行合并，减小树的高度</li>
</ul>
</li>
<li><p>没有发生变化的节点在区块之间是共享的，有发生变化的需要新建分支</p>
<ul>
<li>维护没有发生变化的区块，是因为需要保留历史状态</li>
<li>因为交易可能需要回滚，所以需要保留历史状态</li>
<li>因为智能合约的设计复杂，无法推断出账户之前的状态，所以需要保留账户的历史信息</li>
</ul>
</li>
<li><p>大的状态树包含很多小的状态树</p>
</li>
</ul>
<h4 id="交易树"><a href="#交易树" class="headerlink" title="交易树"></a>交易树</h4><ul>
<li>结构和状态树一样</li>
<li>记录的是交易信息</li>
</ul>
<h4 id="收据树"><a href="#收据树" class="headerlink" title="收据树"></a>收据树</h4><ul>
<li>结构和状态树一样</li>
<li>结合布隆过滤器一起使用</li>
<li>每次交易</li>
<li>记录的是交易的收据信息，记录了交易的执行结果，收据列表的长度和交易列表的长度一致</li>
</ul>
<h3 id="共识协议POW"><a href="#共识协议POW" class="headerlink" title="共识协议POW"></a>共识协议POW</h3><ul>
<li>由于出块时间短，导致出现多个节点同时出块的可能性很高，所以临时性分叉很多</li>
<li>大型矿池更有可能成为最长合法连，马太效应</li>
<li>以太坊使用基于Ghost协议的共识机制</li>
<li>奖励<ul>
<li>叔父区块可以获得出块奖励，每次发布新区块最多只有两个叔父区块可以获得奖励<ul>
<li>七代以内的叔父 区块才有奖励，逐代递减1&#x2F;8</li>
</ul>
</li>
<li>发布区块包含叔父区块可以获得1&#x2F;32奖励，包含多个就有多份奖励</li>
</ul>
</li>
</ul>
<h3 id="挖矿-1"><a href="#挖矿-1" class="headerlink" title="挖矿"></a>挖矿</h3><ul>
<li>使用两个数据集，一个16m的cache，一个1G的dataset</li>
<li>这个大小是会增长的</li>
<li>轻节点保存cache即可，矿工节点保存dataset</li>
</ul>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ul>
<li><p>通过一个种子seed通过某种运算算出一个值，然后依次经过这个运算取值存入cache数组</p>
<ul>
<li>每隔30000个区块会重新生成seed，即对原来的seed取hash</li>
<li>cache数组的初始大小是16M，每隔30000个区块会增大128k</li>
</ul>
</li>
<li><p>生成一个更大的dataset数组</p>
<ul>
<li>初始大小是1G，每隔30000个区块会增大8M</li>
<li>读取小数组第 i % cache_size ，对这个数异或 i 再取hash，记为mix</li>
<li>循环256次<ul>
<li>通过函数传入mix算出下一个读取的下标</li>
<li>通过函数传入mix和 cache[下标 % cache_size]，得到新的mix</li>
</ul>
</li>
<li>得到 hash(mix) 存入dataset[i]</li>
<li>循环这个操作直到填满dataset</li>
</ul>
</li>
<li><p>根据块头和nonce值，算出一个初始的hash，映射到大数组的某个位置和他的下一个位置</p>
<ul>
<li>全节点直接访存，轻节点通过下标间接访问</li>
</ul>
</li>
<li><p>然后这两个位置的数在进行运算得出下两个位置，循环这个操作64次</p>
</li>
<li><p>最后算出的值和挖矿难度的目标阈值比对，满足则通过，不 过则改nonce</p>
</li>
</ul>
<h4 id="难度调整"><a href="#难度调整" class="headerlink" title="难度调整"></a>难度调整</h4><ul>
<li>难度为：max（131072, 父区块难度 + X * Y） + Z<ul>
<li>最低难度：131072</li>
<li>X：难度调整单位，上一个区块的难度的2048分之1</li>
<li>Y：max（n - m，-99）<ul>
<li>n：有uncle区块为2，否则为1</li>
<li>m：（当前区块的时间戳 - 父区块的时间戳） &#x2F; 9，向下取整</li>
</ul>
</li>
<li>Z：2^(区块号-3000000)&#x2F;100000-2^<ul>
<li>难度炸弹，挖矿初期难度炸弹影响较小，越往后难度指数增加</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="WETH"><a href="#WETH" class="headerlink" title="WETH"></a>WETH</h3><ul>
<li>遵守ERC20标准的以太坊代币</li>
<li>和ETH一比一兑换</li>
</ul>
<h2 id="共识机制"><a href="#共识机制" class="headerlink" title="共识机制"></a>共识机制</h2><h3 id="POW"><a href="#POW" class="headerlink" title="POW"></a>POW</h3><ul>
<li>工作量证明，即比拼算力</li>
<li>通过求得满足难度要求的Hash值即可获得记账权</li>
<li>耗费电力，算力集中到了矿池</li>
</ul>
<h3 id="POS"><a href="#POS" class="headerlink" title="POS"></a>POS</h3><ul>
<li>权益证明，即比拼钱、币龄</li>
<li>早期有两边下注的问题</li>
<li>验证者<ul>
<li>质押抵押金可以参与验证者的选举，抵押金越高越容易成为验证者</li>
<li>抵押金会被锁定一段时间</li>
<li>如果验证者将非法的交易写入区块，则会扣除抵押金</li>
</ul>
</li>
</ul>
<h3 id="DPOS"><a href="#DPOS" class="headerlink" title="DPOS"></a>DPOS</h3><ul>
<li>委托权益证明 &#x2F; 代理权益证明</li>
<li>角色：投票、见证人、代表<ul>
<li>用户投票选出见证人</li>
<li>代表人可以提出提案，用户投票决定是否采纳</li>
</ul>
</li>
</ul>
<h3 id="PBFT"><a href="#PBFT" class="headerlink" title="PBFT"></a>PBFT</h3><ul>
<li><p>实用拜占庭容错机制，主要应用于联盟链中</p>
</li>
<li><p>三个阶段：预准备阶段、准备阶段和确认阶段，总节点数为N个，“拜占庭节点”有f个</p>
<ul>
<li>预准备阶段：主节点发布包含待验证记录的预准备消息，接收到预备消息后，每一个节点进入准备阶段</li>
<li>准备阶段：每一个节点验证其正确性，将正确记录保存下来发送给其他节点，直到某一个节点接收到2f个不同节点发送的与预准备阶段接收的记录一致的正确记录，该节点才向其他节点广播确认消息</li>
<li>确认阶段：直到每个诚实节点接收到2f+1个确认消息，协议才终止，各节点对记录达成一致</li>
</ul>
</li>
<li><p>实现区块链的一致性，剔出多余的计算量，避免资源浪费</p>
</li>
<li><p>只有一个节点可以提出新区块，因而不会出现“分叉”问题</p>
</li>
</ul>
<h2 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h2><ul>
<li>将治理规则以智能合约形式编码的去中心化自治组织，与公司制相对</li>
<li>组织资源、事项执行、资金分配</li>
</ul>



<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>License</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">Newer</div><a href="/2024/01/18/Note/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%BC%80%E5%8F%91/%E5%9F%BA%E7%A1%80/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></div><div class="item" id="next"><div class="note">Older</div><a href="/2024/01/18/Note/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%BC%80%E5%8F%91/%E5%9F%BA%E7%A1%80/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AE%89%E5%85%A8/">区块链安全</a></div></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>本站由 <a href="/">@anonymity</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.19.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0';
  stellar.config = {
    date_suffix: {
      just: 'Just',
      min: 'minutes ago',
      hour: 'hours ago',
      day: 'days ago',
      month: 'months ago',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
